(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{45:function(e,t,n){"use strict";n.r(t);var c=n(21),a=n.n(c),r=n(1),o=n(7),u=n(4),i=n(2),s=(n(8),n(0)),d=function(e){var t=e.person,n=e.deletePerson;return Object(s.jsxs)("div",{className:"contact-name",children:[Object(s.jsxs)("h4",{children:[t.name," ",t.number]}),Object(s.jsx)("button",{onClick:function(){return n(t.id,t.name)},children:"delete"})]})},l=function(e){var t=e.persons,n=e.deletePerson;return Object(s.jsx)("div",{children:t.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(d,{person:e,deletePerson:n})},e.name)}))})},j=function(e){var t=e.text,n=e.handle;return Object(s.jsxs)("div",{children:[t,Object(s.jsx)("input",{type:"text",onChange:n})]})},b=function(e){var t=e.inputText,n=e.inputValue,c=e.inputHandle;return Object(s.jsxs)("div",{children:[t,": ",Object(s.jsx)("input",{type:"text",value:n,onChange:c})]})},f=function(e){var t=e.handleSubmit,n=e.handleNameChange,c=e.handleNumChange,a=e.newName,r=e.newNum;return Object(s.jsxs)("form",{onSubmit:t,className:"contact-form",children:[Object(s.jsx)(b,{inputText:"name",inputValue:a,inputHandle:n}),Object(s.jsx)(b,{inputText:"number",inputValue:r,inputHandle:c}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.msg,n=e.setMsg,c=t.notify,a=t.err,o=c.length>0?4:10,u=setInterval((function(){(o-=1)<=0&&(clearInterval(u),c.length>0?n(Object(r.a)(Object(r.a)({},t),{},{notify:""})):n(Object(r.a)(Object(r.a)({},t),{},{err:""})))}),1e3);return Object(s.jsx)("div",{className:c.length>0?"notify":"error",children:c.length>0?c:a})},O=n(6),m=n.n(O),p="/api/persons",x={getContacts:function(){return m.a.get(p).then((function(e){return e.data}))},addContact:function(e){return m.a.post(p,e).then((function(e){return e.data}))},updateContact:function(e,t){return m.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},deleteContact:function(e){return m.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data})).catch((function(e){return"Person already deleted"}))}},v=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),d=Object(u.a)(a,2),b=d[0],O=d[1],m=Object(i.useState)(""),p=Object(u.a)(m,2),v=p[0],g=p[1],y=Object(i.useState)({notify:"",err:""}),w=Object(u.a)(y,2),C=w[0],N=w[1],S=Object(i.useState)(Object(o.a)(n)),P=Object(u.a)(S,2),k=P[0],H=P[1];return Object(i.useEffect)((function(){x.getContacts().then((function(e){c(e),H(e)}))}),[]),Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"contact-info",children:[Object(s.jsx)("h2",{children:"Phonebook"}),C.notify.length>0||C.err.length>0?Object(s.jsx)(h,{msg:C,setMsg:N}):"",Object(s.jsx)(j,{text:"filter shown with : ",handle:function(e){var t=e.target.value.toLowerCase(),c=n.filter((function(e){return e.name.toLowerCase().includes(t)}));H(c)}}),Object(s.jsx)("h3",{children:"add a new contact"}),Object(s.jsx)(f,{handleSubmit:function(e){e.preventDefault();var t={name:b,number:v},a=[].concat(Object(o.a)(k),[t]).map((function(e){return e.name})),u=new Set(a),i=Array.from(u);if(a.length!==i.length){var s=k.find((function(e){return e.name===b}));window.confirm("".concat(b," already added to phonebook,replace the old number with the new one?"))&&(!function(e,t){var a=k.find((function(t){return t.id===e})),o=Object(r.a)(Object(r.a)({},a),{},{number:t});x.updateContact(e,o).then((function(t){H(k.map((function(n){return n.id!==e?n:t}))),c(n.map((function(n){return n.id!==e?n:t})))}))}(s.id,v),N(Object(r.a)(Object(r.a)({},C),{},{notify:"".concat(b," has been updated Successfully")})))}else x.addContact(t).then((function(e){H([].concat(Object(o.a)(k),[e])),c([].concat(Object(o.a)(n),[e])),N(Object(r.a)(Object(r.a)({},C),{},{notify:"".concat(b," added successfully")}))}));O(""),g("")},newName:b,newNum:v,handleNameChange:function(e){O(e.target.value)},handleNumChange:function(e){g(e.target.value)}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(l,{persons:k,deletePerson:function(e,t){window.confirm("Delete ".concat(t))&&x.deleteContact(e).then((function(a){"Person already deleted"===a?N(Object(r.a)(Object(r.a)({},C),{},{err:"".concat(t," has already been deleted from the server")})):(H(k.filter((function(t){return t.id!==e}))),c(n.filter((function(t){return t.id!==e}))),N(Object(r.a)(Object(r.a)({},C),{},{notify:"".concat(t," deleted successfully")})))}))}})]})})};a.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))},8:function(e,t,n){}},[[45,1,2]]]);
//# sourceMappingURL=main.af83001d.chunk.js.map